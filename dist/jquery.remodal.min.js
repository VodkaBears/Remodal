/*
 *  Remodal - v0.6.3
 *  Flat, responsive, lightweight, easy customizable modal window plugin with declarative state notation and hash tracking.
 *  http://vodkabears.github.io/remodal/
 *
 *  Made by Ilya Makarov
 *  Under MIT License
 */
!function(a){"use strict";function b(a){var b,c,d,e,f=a.css("transition-duration")||a.css("-webkit-transition-duration")||a.css("-moz-transition-duration")||a.css("-o-transition-duration")||a.css("-ms-transition-duration")||"0s",g=a.css("transition-delay")||a.css("-webkit-transition-delay")||a.css("-moz-transition-delay")||a.css("-o-transition-delay")||a.css("-ms-transition-delay")||"0s";for(f=f.split(", "),g=g.split(", "),e=0,c=f.length,b=Number.NEGATIVE_INFINITY;c>e;e++)d=parseFloat(f[e])+parseFloat(g[e]),d>b&&(b=d);return 1e3*d}function c(){if(a(document.body).height()<=a(window).height())return 0;var b,c,d=document.createElement("div"),e=document.createElement("div");return d.style.visibility="hidden",d.style.width="100px",document.body.appendChild(d),b=d.offsetWidth,d.style.overflow="scroll",e.style.width="100%",d.appendChild(e),c=e.offsetWidth,d.parentNode.removeChild(d),b-c}function d(){var b,d,e=a("html"),f=k+"-is-locked";e.hasClass(f)||(d=a(document.body),b=parseInt(d.css("padding-right"),10)+c(),d.css("padding-right",b+"px"),e.addClass(f))}function e(){var b,d,e=a("html"),f=k+"-is-locked";e.hasClass(f)&&(d=a(document.body),b=parseInt(d.css("padding-right"),10)-c(),d.css("padding-right",b+"px"),e.removeClass(f))}function f(a){var b,c,d,e,f={};for(a=a.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,","),b=a.split(","),e=0,c=b.length;c>e;e++)b[e]=b[e].split(":"),d=b[e][1],("string"==typeof d||d instanceof String)&&(d="true"===d||("false"===d?!1:d)),("string"==typeof d||d instanceof String)&&(d=isNaN(d)?d:+d),f[b[e][0]]=d;return f}function g(c,d){var e,f,g,h=this;h.settings=a.extend({},l,d),h.$body=a(document.body),h.$bg=a("."+k+"-bg"),h.$closeButton=a('<a href="#"></a>').addClass(k+"-close"),h.$wrapper=a("<div>").addClass(k+"-wrapper"),h.$overlay=a("<div>").addClass(k+"-overlay"),h.$modal=c,h.$modal.addClass(k),h.$modal.css("visibility","visible"),h.$modal.append(h.$closeButton),h.$wrapper.append(h.$overlay),h.$wrapper.append(h.$modal),h.$body.append(h.$wrapper),h.$confirmButton=h.$modal.find("."+k+"-confirm"),h.$cancelButton=h.$modal.find("."+k+"-cancel"),e=b(h.$overlay),f=b(h.$modal),g=b(h.$bg),h.td=Math.max(e,f,g),h.$wrapper.on("click."+k,"."+k+"-close",function(a){a.preventDefault(),h.close()}),h.$wrapper.on("click."+k,"."+k+"-cancel",function(a){a.preventDefault(),h.$modal.trigger("cancel"),h.settings.closeOnCancel&&h.close("cancellation")}),h.$wrapper.on("click."+k,"."+k+"-confirm",function(a){a.preventDefault(),h.$modal.trigger("confirm"),h.settings.closeOnConfirm&&h.close("confirmation")}),a(document).on("keyup."+k,function(a){27===a.keyCode&&h.settings.closeOnEscape&&h.close()}),h.$wrapper.on("click."+k,function(b){var c=a(b.target);c.hasClass(k+"-wrapper")&&h.settings.closeOnAnyClick&&h.close()}),h.$overlay.on("click."+k,function(){h.$wrapper.click()}),h.index=a[j].lookup.push(h)-1,h.busy=!1}function h(b,c){var d,e,f=location.hash.replace("#","");if("undefined"==typeof c&&(c=!0),f){try{e=a("[data-"+j+"-id="+f.replace(new RegExp("/","g"),"\\/")+"]")}catch(g){}e&&e.length&&(d=a[j].lookup[e.data(j)],d&&d.settings.hashTracking&&d.open())}else if(c){var h=m[m.length-1];h&&!h.busy&&h.settings.hashTracking&&h.close()}}var i,j="remodal",k=window.remodalGlobals&&window.remodalGlobals.namespace||j,l=a.extend({hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnAnyClick:!0,stack:!1},window.remodalGlobals&&window.remodalGlobals.defaults),m=[];g.prototype.open=function(){if(!this.busy){var b,c=this;if(c.busy=!0,c.$modal.trigger("open"),b=c.$modal.attr("data-"+j+"-id"),b&&c.settings.hashTracking&&(i=a(window).scrollTop(),location.hash=b),!c.settings.stack){var e=m[m.length-1];e&&e!==c&&(e.$wrapper.hide(),e.$body.removeClass(k+"-is-active")),m=[]}m.push(c),d(),c.$wrapper.show(),setTimeout(function(){c.$body.addClass(k+"-is-active"),c.$wrapper.addClass(k+"-is-opened"),setTimeout(function(){c.busy=!1,c.$modal.trigger("opened")},c.td+50)},25)}},g.prototype.close=function(b){if(!this.busy){var c=this,d=1===m.length;c.busy=!0,c.$modal.trigger({type:"close",reason:b}),c.settings.hashTracking&&c.$modal.attr("data-"+j+"-id")===location.hash.substr(1)&&(location.hash="",a(window).scrollTop(i)),d&&c.$body.removeClass(k+"-is-active"),c.$wrapper.removeClass(k+"-is-opened"),setTimeout(function(){d&&e(),m.pop(),c.$wrapper.hide(),c.busy=!1,c.$modal.trigger({type:"closed",reason:b})},c.td+50)}},a[j]={lookup:[]},a.fn[j]=function(b){var c,d;return this.each(function(e,f){d=a(f),null==d.data(j)?(c=new g(d,b),d.data(j,c.index),c.settings.hashTracking&&d.attr("data-"+j+"-id")===location.hash.substr(1)&&c.open()):c=a[j].lookup[d.data(j)]}),c},a(document).ready(function(){a(document).on("click","[data-"+j+"-target]",function(b){b.preventDefault();var c=b.currentTarget,d=c.getAttribute("data-"+j+"-target"),e=a("[data-"+j+"-id="+d+"]");a[j].lookup[e.data(j)].open()}),a(document).find("."+k).each(function(b,c){var d=a(c),e=d.data(j+"-options");e?("string"==typeof e||e instanceof String)&&(e=f(e)):e={},d[j](e)})}),a(window).bind("hashchange."+k,h)}(window.jQuery||window.Zepto);