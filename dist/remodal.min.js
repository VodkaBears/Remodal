/*
 *  Remodal - v1.1.1
 *  Responsive, lightweight, fast, synchronized with CSS animations, fully customizable modal window plugin with declarative configuration and hash tracking.
 *  http://vodkabears.github.io/remodal/
 *
 *  Made by Ilya Makarov
 *  Under MIT License
 */

!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(a,c)}):"object"==typeof exports?b(a,require("jquery")):b(a,a.jQuery||a.Zepto)}(this,function(a,b){"use strict";function c(a){if(z&&"none"===a.css("animation-name")&&"none"===a.css("-webkit-animation-name")&&"none"===a.css("-moz-animation-name")&&"none"===a.css("-o-animation-name")&&"none"===a.css("-ms-animation-name"))return 0;var b,c,d,e,f=a.css("animation-duration")||a.css("-webkit-animation-duration")||a.css("-moz-animation-duration")||a.css("-o-animation-duration")||a.css("-ms-animation-duration")||"0s",g=a.css("animation-delay")||a.css("-webkit-animation-delay")||a.css("-moz-animation-delay")||a.css("-o-animation-delay")||a.css("-ms-animation-delay")||"0s",h=a.css("animation-iteration-count")||a.css("-webkit-animation-iteration-count")||a.css("-moz-animation-iteration-count")||a.css("-o-animation-iteration-count")||a.css("-ms-animation-iteration-count")||"1";for(f=f.split(", "),g=g.split(", "),h=h.split(", "),e=0,c=f.length,b=Number.NEGATIVE_INFINITY;e<c;e++)(d=parseFloat(f[e])*parseInt(h[e],10)+parseFloat(g[e]))>b&&(b=d);return b}function d(){if(b(document).height()<=b(window).height())return 0;var a,c,d=document.createElement("div"),e=document.createElement("div");return d.style.visibility="hidden",d.style.width="100px",document.body.appendChild(d),a=d.offsetWidth,d.style.overflow="scroll",e.style.width="100%",d.appendChild(e),c=e.offsetWidth,d.parentNode.removeChild(d),a-c}function e(){if(!A){var a,c,e,f=b("html"),g=k("is-locked");f.hasClass(g)||(e=b(document.body),a=d(),c=parseInt(e.css("padding-right"),10)+a,e.css("padding-right",c+"px"),e.attr("data-scrollbar-width",a),f.addClass(g))}}function f(){if(!A){var a,c,d,e=b("html"),f=k("is-locked");e.hasClass(f)&&(d=b(document.body),a=Number(d.attr("data-scrollbar-width"))||0,c=parseInt(d[0].style.paddingRight,10)-a,c=c>0?c+"px":"",d.css("padding-right",c),d.removeAttr("data-scrollbar-width"),e.removeClass(f))}}function g(a,b,c,d){var e=k("is",b),f=[k("is",w.CLOSING),k("is",w.OPENING),k("is",w.CLOSED),k("is",w.OPENED)].join(" ");a.$bg.removeClass(f).addClass(e),a.$overlay.removeClass(f).addClass(e),a.$wrapper.removeClass(f).addClass(e),a.$modal.removeClass(f).addClass(e),a.state=b,!c&&a.$modal.trigger({type:b,reason:d},[{reason:d}])}function h(a,d,e){var f=0,g=function(a){a.target===this&&f++},h=function(a){a.target===this&&0==--f&&(b.each(["$bg","$overlay","$wrapper","$modal"],function(a,b){e[b].off(t+" "+u)}),d())};b.each(["$bg","$overlay","$wrapper","$modal"],function(a,b){e[b].on(t,g).on(u,h)}),a(),0===c(e.$bg)&&0===c(e.$overlay)&&0===c(e.$wrapper)&&0===c(e.$modal)&&(b.each(["$bg","$overlay","$wrapper","$modal"],function(a,b){e[b].off(t+" "+u)}),d())}function i(a){a.state!==w.CLOSED&&(b.each(["$bg","$overlay","$wrapper","$modal"],function(b,c){a[c].off(t+" "+u)}),a.$bg.removeClass(a.settings.modifier),a.$overlay.removeClass(a.settings.modifier).hide(),a.$wrapper.hide().attr("aria-hidden","true"),f(),g(a,w.CLOSED,!0))}function j(a){var b,c,d,e,f={};for(a=a.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,","),b=a.split(","),e=0,c=b.length;e<c;e++)b[e]=b[e].split(":"),d=b[e][1],("string"==typeof d||d instanceof String)&&(d="true"===d||"false"!==d&&d),("string"==typeof d||d instanceof String)&&(d=isNaN(d)?d:+d),f[b[e][0]]=d;return f}function k(){for(var a=s,b=0;b<arguments.length;++b)a+="-"+arguments[b];return a}function l(){var a,c,d=location.hash.replace("#","");if(d){try{c=b("[data-"+r+'-id="'+d+'"]')}catch(e){}c&&c.length&&(a=b[r].lookup[c.data(r)])&&a.settings.hashTracking&&a.open()}else p&&p.state===w.OPENED&&p.settings.hashTracking&&p.close()}function m(a){var c=[];return a.each(function(){b(this).is(y.join(", "))&&c.push(this)}),c}function n(a,b){var c=m(a.$modal.children()),d=c.indexOf(document.activeElement);c.length&&(b.shiftKey&&0===d?(b.preventDefault(),c[c.length-1].focus()):b.shiftKey||d!==c.length-1||(b.preventDefault(),c[0].focus()))}function o(a,c){var d=b(document.body),e=d,f=this;f.settings=b.extend({},v,c),f.index=b[r].lookup.push(f)-1,f.state=w.CLOSED,f.$overlay=b("."+k("overlay")),null!==f.settings.appendTo&&f.settings.appendTo.length&&(e=b(f.settings.appendTo)),f.$overlay.length||(f.$overlay=b("<div>").addClass(k("overlay")+" "+k("is",w.CLOSED)).hide(),e.append(f.$overlay)),f.$bg=b("."+k("bg")).addClass(k("is",w.CLOSED)),f.$modal=a.addClass(s+" "+k("is-initialized")+" "+f.settings.modifier+" "+k("is",w.CLOSED)).attr("tabindex","-1"),f.$wrapper=b("<div>").addClass(k("wrapper")+" "+f.settings.modifier+" "+k("is",w.CLOSED)).hide().attr("aria-hidden","true").append(f.$modal),e.append(f.$wrapper),f.$wrapper.on("click."+s,"[data-"+r+'-action="close"]',function(a){a.preventDefault(),f.close()}),f.$wrapper.on("click."+s,"[data-"+r+'-action="cancel"]',function(a){a.preventDefault(),f.$modal.trigger(x.CANCELLATION),f.settings.closeOnCancel&&f.close(x.CANCELLATION)}),f.$wrapper.on("click."+s,"[data-"+r+'-action="confirm"]',function(a){a.preventDefault(),f.$modal.trigger(x.CONFIRMATION),f.settings.closeOnConfirm&&f.close(x.CONFIRMATION)}),f.$wrapper.on("click."+s,function(a){b(a.target).hasClass(k("wrapper"))&&f.settings.closeOnOutsideClick&&f.close()})}var p,q,r="remodal",s=a.REMODAL_GLOBALS&&a.REMODAL_GLOBALS.NAMESPACE||r,t=b.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],function(a){return a+"."+s}).join(" "),u=b.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],function(a){return a+"."+s}).join(" "),v=b.extend({hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnOutsideClick:!0,modifier:"",appendTo:null},a.REMODAL_GLOBALS&&a.REMODAL_GLOBALS.DEFAULTS),w={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened"},x={CONFIRMATION:"confirmation",CANCELLATION:"cancellation"},y=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],z=function(){var a=document.createElement("div").style;return void 0!==a.animationName||void 0!==a.WebkitAnimationName||void 0!==a.MozAnimationName||void 0!==a.msAnimationName||void 0!==a.OAnimationName}(),A=/iPad|iPhone|iPod/.test(navigator.platform);o.prototype.open=function(){var a,c=this;c.state!==w.OPENING&&c.state!==w.CLOSING&&(a=c.$modal.attr("data-"+r+"-id"),a&&c.settings.hashTracking&&(q=b(window).scrollTop(),location.hash=a),p&&p!==c&&i(p),p=c,e(),c.$bg.addClass(c.settings.modifier),c.$overlay.addClass(c.settings.modifier).show(),c.$wrapper.show().attr("aria-hidden","false").scrollTop(0),c.$modal.focus(),h(function(){g(c,w.OPENING)},function(){g(c,w.OPENED)},c))},o.prototype.close=function(a){var c=this;c.state!==w.OPENING&&c.state!==w.CLOSING&&c.state!==w.CLOSED&&(c.settings.hashTracking&&c.$modal.attr("data-"+r+"-id")===location.hash.substr(1)&&(location.hash="",b(window).scrollTop(q)),h(function(){g(c,w.CLOSING,!1,a)},function(){c.$bg.removeClass(c.settings.modifier),c.$overlay.removeClass(c.settings.modifier).hide(),c.$wrapper.hide().attr("aria-hidden","true"),f(),g(c,w.CLOSED,!1,a)},c))},o.prototype.getState=function(){return this.state},o.prototype.destroy=function(){var a,c=b[r].lookup;i(this),this.$wrapper.remove(),delete c[this.index],0===(a=b.grep(c,function(a){return!!a}).length)&&(this.$overlay.remove(),this.$bg.removeClass(k("is",w.CLOSING)+" "+k("is",w.OPENING)+" "+k("is",w.CLOSED)+" "+k("is",w.OPENED)))},b[r]={lookup:[]},b.fn[r]=function(a){var c,d;return this.each(function(e,f){d=b(f),null==d.data(r)?(c=new o(d,a),d.data(r,c.index),c.settings.hashTracking&&d.attr("data-"+r+"-id")===location.hash.substr(1)&&c.open()):c=b[r].lookup[d.data(r)]}),c},b(document).ready(function(){b(document).on("click","[data-"+r+"-target]",function(a){a.preventDefault();var c=a.currentTarget,d=c.getAttribute("data-"+r+"-target"),e=b("[data-"+r+'-id="'+d+'"]');b[r].lookup[e.data(r)].open()}),b(document).find("."+s).each(function(a,c){var d=b(c),e=d.data(r+"-options");e?("string"==typeof e||e instanceof String)&&(e=j(e)):e={},d[r](e)}),b(document).on("keydown."+s,function(a){p&&p.settings.closeOnEscape&&p.state===w.OPENED&&27===a.keyCode&&p.close(),p&&p.state===w.OPENED&&9===a.keyCode&&n(p,a)}),b(window).on("hashchange."+s,l)})});